<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script src="/Content/js/jquery/jquery-2.1.1.min.js"></script>
    <script>
        function Register() {
            $.ajax({
                url: '/api/user/register',
                data: { account: $("#username").val(), password: $("#password").val(), email: $("#email").val() },
                dataType: "json",
                type: "post",
                async: false,
                beforeSend: function () {
                },
                success: function (data) {
                    window.alert("注册成功");
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }
        function GetVerification() {
            $.ajax({
                url: '/api/user/getverification',
                data: { account: $("#username").val(), password: $("#password").val(), email: $("#email").val() },
                dataType: "json",
                type: "post",
                async: false,
                beforeSend: function () {
                },
                success: function (data) {
                    window.alert("注册成功");
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }
        document.getElementById("confirm").addEventListener("focus", checkPwd);
        document.getElementById("confirm").addEventListener("blur", checkPwd);
        function checkPwd() {
            if (!$("#confirm").val()) {
                $("#message").text("请输入确认密码").show();
            } else if ($("#password").val() != $("#confirm").val()) {
                $("#message").text("两次密码输入不一致").show();
            } else {
                $("#message").text("").show();
            }
        }
    </script>
</head>
<body>
    <div>
        <div>
            <label>用户名</label>
            <input type="text" id="username" />
        </div>
        <div>
            <label>密  码</label>
            <input type="password" id="password" />
        </div>
        <div>
            <label>确认密码</label>
            <input type="password" id="confirm" />
            <label id="message"></label>
        </div>
        <div>
            <label>邮  箱</label>
            <input type="text" id="email" />
            <select>
                <option>@QQ.com</option>
                <option>@163.com</option>
                <option>@sina.com</option>
            </select>
        </div>
        <div>
            <label>验证码</label>
            <input type="text" id="verification" />
            <input type="button" onclick="GetVerification()"/>
        </div>
        <div>
            <input type="button" value="注册" onclick="Register()" />
        </div>
    </div>
</body>
</html>
